<!doctype html><html lang=hi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAAdUlEQVR4Ae3MIRJAUBCH8e81R3AO53AmvIQmu5MzqE8iKoZAEdZYZhT7/cuGnR9/yeEJrDcW8DjEKlbFasQmFTQitj+cK2TqO8ggg2LceygiZ6YjeQel9Me10NI8ghR7DhlkkEFBxQTEShVUcVHGcAsZ8PylDecfc51kCzSlAAAAAElFTkSuQmCC type=image/x-icon><link rel=preload href=https://ashishdoneriya.github.io/%20/fonts/Roboto.ttf as=font type=font/ttf crossorigin=anonymous><link rel=preload href=https://ashishdoneriya.github.io/%20/fonts/RobotoMono.ttf as=font type=font/ttf crossorigin=anonymous><link rel=preload href=https://ashishdoneriya.github.io/%20/fonts/Roboto-Italic.ttf as=font type=font/ttf crossorigin=anonymous><link rel=preload href=https://ashishdoneriya.github.io/%20/fonts/RobotoMono-Italic.ttf as=font type=font/ttf crossorigin=anonymous><link rel=stylesheet href=https://ashishdoneriya.github.io/scss/main.min.css></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a class=navbar-brand href=/>My Workbook</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/topics/big-data/>Big Data</a></li><li class=nav-item><a class=nav-link href=/topics/english/>English</a></li><li class=nav-item><a class=nav-link href=/topics/essay/>Essay</a></li><li class=nav-item><a class=nav-link href=/topics/finance/>Finance</a></li><li class=nav-item><a class=nav-link href=/topics/java/>Java</a></li><li class=nav-item><a class=nav-link href=/topics/lists/>Lists</a></li><li class=nav-item><a class=nav-link href=/topics/programming/>Programming</a></li></ul></div></div></nav><main><article class=page-wrapper><h1 class="mb-4 text-center">Some Important hive syntax</h1><div class="d-flex justify-content-center align-items-center mb-4 text-muted small"><time datetime="2019-08-06 03:17:00 +0530 +0530">Aug 6, 2019</time>
<span class=mx-2>|</span>
<span>Ashish Doneriya</span>
<span class=mx-2>|</span>
<a class=text-decoration-none href=/topics/big-data rel=category>Big Data</a></div><div class=post-content><h2 id=partitions>Partitions</h2><p>First set these properties</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SET</span> hive.<span style=color:#66d9ef>exec</span>.<span style=color:#66d9ef>dynamic</span>.partition <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> hive.<span style=color:#66d9ef>exec</span>.<span style=color:#66d9ef>dynamic</span>.partition.<span style=color:#66d9ef>mode</span> <span style=color:#f92672>=</span> nonstrict;
</span></span></code></pre></div><h3 id=how-to-create-partitioned-table>How to create partitioned table</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>table</span> c1_part (id int, name string, email string) partitioned <span style=color:#66d9ef>by</span> (countrycode string);
</span></span></code></pre></div><h3 id=how-to-insert-data-into-partitioned-table>How to insert data into partitioned table</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> <span style=color:#66d9ef>table</span> c1_part partition(countrycode) <span style=color:#66d9ef>select</span> c1.id, c1.name, c1.email, c1.countrycode <span style=color:#66d9ef>from</span> c1;
</span></span></code></pre></div><h3 id=how-to-analyze-paritioned-tables>How to analyze paritioned tables</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>analyze</span> <span style=color:#66d9ef>table</span> tableName partition(partitionName) compute <span style=color:#66d9ef>statistics</span> noscan;
</span></span></code></pre></div><h2 id=bucketing>Bucketing</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> hive.mapred.<span style=color:#66d9ef>mode</span><span style=color:#f92672>=</span>nonstrict;
</span></span><span style=display:flex><span><span style=color:#66d9ef>set</span> hive.enforce.bucketing<span style=color:#f92672>=</span><span style=color:#66d9ef>true</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>table</span> c1_buck (id int, name string, email string, countrycode string) clustered <span style=color:#66d9ef>by</span> (id) <span style=color:#66d9ef>into</span> <span style=color:#ae81ff>10</span> buckets;
</span></span></code></pre></div><h3 id=how-to-insert-data-into-bucketed-table>How to insert data into bucketed table</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>insert</span> overwrite <span style=color:#66d9ef>into</span> <span style=color:#66d9ef>table</span> c1_buck <span style=color:#66d9ef>select</span> c1.id, c1.name, c1.email, c1.countrycode <span style=color:#66d9ef>from</span> c1;
</span></span></code></pre></div><h2 id=both-partitioning-and-bucketing>Both Partitioning and Bucketing</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SET</span> hive.<span style=color:#66d9ef>exec</span>.<span style=color:#66d9ef>dynamic</span>.partition <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> hive.<span style=color:#66d9ef>exec</span>.<span style=color:#66d9ef>dynamic</span>.partition.<span style=color:#66d9ef>mode</span> <span style=color:#f92672>=</span> nonstrict;
</span></span><span style=display:flex><span><span style=color:#66d9ef>set</span> hive.mapred.<span style=color:#66d9ef>mode</span><span style=color:#f92672>=</span>nonstrict;
</span></span><span style=display:flex><span><span style=color:#66d9ef>set</span> hive.enforce.bucketing<span style=color:#f92672>=</span><span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>table</span> c1_part_buck (id int, name string, email string) partitioned <span style=color:#66d9ef>by</span> (countrycode string) clustered <span style=color:#66d9ef>by</span> (id) <span style=color:#66d9ef>into</span> <span style=color:#ae81ff>10</span> buckets;
</span></span><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> <span style=color:#66d9ef>table</span> c1_part_buck partition(countrycode) <span style=color:#66d9ef>select</span> c1.id, c1.name, c1.email, c1.countrycode <span style=color:#66d9ef>from</span> c1;
</span></span></code></pre></div><h3 id=for-transactional-tables>For transactional tables</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> hive.compactor.initiator.<span style=color:#66d9ef>on</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>set</span> hive.support.concurrency <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>set</span> hive.txn.manager <span style=color:#f92672>=</span> org.apache.hadoop.hive.ql.lockmgr.DbTxnManager;
</span></span></code></pre></div></div></article></main><script async src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js defer></script></body></html>