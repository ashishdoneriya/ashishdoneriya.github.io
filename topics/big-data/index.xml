<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Big Data on My Workbook</title><link>https://ashishdoneriya.github.io/topics/big-data/</link><description>Recent content in Big Data on My Workbook</description><generator>Hugo</generator><language>en</language><lastBuildDate>Wed, 04 Sep 2019 03:17:00 +0530</lastBuildDate><atom:link href="https://ashishdoneriya.github.io/topics/big-data/index.xml" rel="self" type="application/rss+xml"/><item><title>Hive tpcds query</title><link>https://ashishdoneriya.github.io/hive-tpcds-queries.html</link><pubDate>Wed, 04 Sep 2019 03:17:00 +0530</pubDate><guid>https://ashishdoneriya.github.io/hive-tpcds-queries.html</guid><description>&lt;p>Database :&lt;br>
tpcds_bin_partitioned_orc_60&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> dt.d_year, item.i_brand_id brand_id, item.i_brand brand, &lt;span style="color:#66d9ef">sum&lt;/span>(ss_ext_sales_price) sum_agg &lt;span style="color:#66d9ef">from&lt;/span> date_dim dt, store_sales, item &lt;span style="color:#66d9ef">where&lt;/span> dt.d_date_sk &lt;span style="color:#f92672">=&lt;/span> store_sales.ss_sold_date_sk &lt;span style="color:#66d9ef">and&lt;/span> store_sales.ss_item_sk &lt;span style="color:#f92672">=&lt;/span> item.i_item_sk &lt;span style="color:#66d9ef">and&lt;/span> item.i_manufact_id &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">436&lt;/span> &lt;span style="color:#66d9ef">and&lt;/span> dt.d_moy&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">12&lt;/span> &lt;span style="color:#66d9ef">group&lt;/span> &lt;span style="color:#66d9ef">by&lt;/span> dt.d_year, item.i_brand, item.i_brand_id &lt;span style="color:#66d9ef">order&lt;/span> &lt;span style="color:#66d9ef">by&lt;/span> dt.d_year, sum_agg &lt;span style="color:#66d9ef">desc&lt;/span>, brand_id &lt;span style="color:#66d9ef">limit&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Some Important hive syntax</title><link>https://ashishdoneriya.github.io/important-hive-syntax.html</link><pubDate>Tue, 06 Aug 2019 03:17:00 +0530</pubDate><guid>https://ashishdoneriya.github.io/important-hive-syntax.html</guid><description>&lt;h2 id="partitions">Partitions&lt;/h2>
&lt;p>First set these properties&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">SET&lt;/span> hive.&lt;span style="color:#66d9ef">exec&lt;/span>.&lt;span style="color:#66d9ef">dynamic&lt;/span>.partition &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">SET&lt;/span> hive.&lt;span style="color:#66d9ef">exec&lt;/span>.&lt;span style="color:#66d9ef">dynamic&lt;/span>.partition.&lt;span style="color:#66d9ef">mode&lt;/span> &lt;span style="color:#f92672">=&lt;/span> nonstrict;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="how-to-create-partitioned-table">How to create partitioned table&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">create&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> c1_part (id int, name string, email string) partitioned &lt;span style="color:#66d9ef">by&lt;/span> (countrycode string);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="how-to-insert-data-into-partitioned-table">How to insert data into partitioned table&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">insert&lt;/span> &lt;span style="color:#66d9ef">into&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> c1_part partition(countrycode) &lt;span style="color:#66d9ef">select&lt;/span> c1.id, c1.name, c1.email, c1.countrycode &lt;span style="color:#66d9ef">from&lt;/span> c1;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="how-to-analyze-paritioned-tables">How to analyze paritioned tables&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">analyze&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> tableName partition(partitionName) compute &lt;span style="color:#66d9ef">statistics&lt;/span> noscan;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="bucketing">Bucketing&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> hive.mapred.&lt;span style="color:#66d9ef">mode&lt;/span>&lt;span style="color:#f92672">=&lt;/span>nonstrict;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> hive.enforce.bucketing&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">true&lt;/span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">create&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> c1_buck (id int, name string, email string, countrycode string) clustered &lt;span style="color:#66d9ef">by&lt;/span> (id) &lt;span style="color:#66d9ef">into&lt;/span> &lt;span style="color:#ae81ff">10&lt;/span> buckets;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="how-to-insert-data-into-bucketed-table">How to insert data into bucketed table&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">insert&lt;/span> overwrite &lt;span style="color:#66d9ef">into&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> c1_buck &lt;span style="color:#66d9ef">select&lt;/span> c1.id, c1.name, c1.email, c1.countrycode &lt;span style="color:#66d9ef">from&lt;/span> c1;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="both-partitioning-and-bucketing">Both Partitioning and Bucketing&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">SET&lt;/span> hive.&lt;span style="color:#66d9ef">exec&lt;/span>.&lt;span style="color:#66d9ef">dynamic&lt;/span>.partition &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">SET&lt;/span> hive.&lt;span style="color:#66d9ef">exec&lt;/span>.&lt;span style="color:#66d9ef">dynamic&lt;/span>.partition.&lt;span style="color:#66d9ef">mode&lt;/span> &lt;span style="color:#f92672">=&lt;/span> nonstrict;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> hive.mapred.&lt;span style="color:#66d9ef">mode&lt;/span>&lt;span style="color:#f92672">=&lt;/span>nonstrict;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> hive.enforce.bucketing&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">true&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">create&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> c1_part_buck (id int, name string, email string) partitioned &lt;span style="color:#66d9ef">by&lt;/span> (countrycode string) clustered &lt;span style="color:#66d9ef">by&lt;/span> (id) &lt;span style="color:#66d9ef">into&lt;/span> &lt;span style="color:#ae81ff">10&lt;/span> buckets;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">insert&lt;/span> &lt;span style="color:#66d9ef">into&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> c1_part_buck partition(countrycode) &lt;span style="color:#66d9ef">select&lt;/span> c1.id, c1.name, c1.email, c1.countrycode &lt;span style="color:#66d9ef">from&lt;/span> c1;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="for-transactional-tables">For transactional tables&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> hive.compactor.initiator.&lt;span style="color:#66d9ef">on&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> hive.support.concurrency &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> hive.txn.manager &lt;span style="color:#f92672">=&lt;/span> org.apache.hadoop.hive.ql.lockmgr.DbTxnManager;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>What is the difference between Topic and Partition in Apache Kafka</title><link>https://ashishdoneriya.github.io/topic-vs-partition-in-kafka.html</link><pubDate>Thu, 21 Feb 2019 01:43:00 +0530</pubDate><guid>https://ashishdoneriya.github.io/topic-vs-partition-in-kafka.html</guid><description>&lt;p>Partitions in Kafka are like buckets within a topic used for better load balancing when you are dealing with large throughput where you can as many consumers as your partitions to process your data. For example if you are processing orders you can send all orders for iPad into one partition “0” and iPhones in another partition “1” of the same Orders Topic and you can have two services one processing iPhone order from partition “1” and iPad from partition “0” and also maintain ordering of messages per partition. If a consumer service goes down the another service will pickup messages from both partition until another service comes backup into same consumer group processing orders topic.
Whereas replication factor determines how many backups you want to create for your topic in the Kafka cluster for enabling HA for your data in times of cluster losing a node due to various reasons.&lt;/p></description></item></channel></rss>